# 89Test02技术文档

1、功能概述

- 实现人物模型射箭攻击敌方人物模型，涉及动画（射箭，跑，idle），敌方人物掉血，消失。
- 设计知识点：Unity动画状态机，Unity Slider，粒子特效的使用和预制体的生成销毁逻辑。



2、整体功能的实现思路

- 采用常用的界面，逻辑分开处理的思路
- 启动器首先初始化数据类，数据处理完成后，打开对应界面，进行界面赋值，同时启动人物状态机。



3、资源目录结构

| 目录名称        | 目录内容                       | 父目录    | 其他说明     |      |
| --------------- | ------------------------------ | --------- | ------------ | ---- |
| Resources       | 存放动态加载需要的资源         |           | Assets根目录 |      |
| CSV             | 读取Excel表工具                | Resources | ---          |      |
| WW4_Effects_Sub | 特效存放目录                   | Asset     | ---          |      |
| Scripts         | 存放脚本                       |           | ---          |      |
| MVC             | 界面及界面对应的数据与控制器类 | Scripts   |              |      |



4、界面对象结构拆分

| 结构        | 结构对象说明                   | 父界面对象 |
| ----------- | ------------------------------ | ---------- |
| SampleScene | 主场景                         |            |
| Game        | 游戏界面父物体，管理者脚本挂载 |            |
| Self/Army   | 敌我模型信息                   | Game       |
| GameManager | 游戏启动器                     | Game       |



5、脚本功能部分

| 类             | 主要职责       | 其他说明Main             |
| -------------- | -------------- | ------------------------ |
| GameController | 用于启动游戏   | 当前界面需要数据的初始化 |
| EnemyPanelView | 敌人UI信息类 | 用于处理UI界面的敌人信息 |
| PlayerPanelView | 我方UI信息类 | 用于管理我方人物动画相关 |



6、数据解析

- 通过Excel数据设计对应类型，通过CSV工具进行数据解析操作，缓存数据备用。

  | 模型ID | 模型名字 | 模型note信息 | 最大血量 | 攻击力 | 射击速度   |
  | ------ | -------- | ------------ | -------- | ------ | ---------- |
  | id     | Name     | note         | MaxHp    | Atk    | ShootSpeed |
  
  

7、部分功能的实现思想

- 启动器初始化（进行读取数据），数据赋值成功后，打开界面并对相应UI进行赋值
- 通过委托的方式控制人物的血条及死亡



8、关键代码逻辑的流程图

![Image](https://github.com/89trillion-songjunbo/89Test02_New/blob/main/89Test02%20脚本流程图.png)

![Image](https://github.com/89trillion-songjunbo/89Test02/blob/master/Assets/89Test02.png)


